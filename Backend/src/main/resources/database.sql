
CREATE DATABASE cinemax;

CREATE TABLE IF NOT EXISTS user (
	id INT(10) PRIMARY KEY AUTO_INCREMENT,
	first_name VARCHAR(64) NOT NULL,
	last_name VARCHAR(64) NOT NULL,
	email VARCHAR(128) NOT NULL UNIQUE,
	password VARCHAR(64) NOT NULL,
	birth_date DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS room (
	id INT(10) PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(64) NOT NULL,
	capacity INT(10) DEFAULT 100
);

CREATE TABLE IF NOT EXISTS movie (
	id INT(10) PRIMARY KEY AUTO_INCREMENT,
	title VARCHAR(64) NOT NULL,
	`version` VARCHAR(64) NOT NULL,
	vision VARCHAR(128) NOT NULL UNIQUE,
	duration FLOAT(10) NOT NULL
);

CREATE TABLE IF NOT EXISTS ticket (
	id INT(10) PRIMARY KEY AUTO_INCREMENT,
	movie_id INT(10) NOT NULL,
	user_id INT(10) NOT NULL,
	price FLOAT(10) NOT NULL,
	created_date DATE NOT NULL,
	FOREIGN KEY FK_TicketMovie(movie_id)
	REFERENCES movie(id)
	ON UPDATE CASCADE
	ON DELETE RESTRICT,
	FOREIGN KEY FK_TicketUser(user_id)
	REFERENCES user(id)
	ON UPDATE CASCADE
	ON DELETE RESTRICT
);

CREATE TABLE IF NOT EXISTS session (
	id INT(10) PRIMARY KEY AUTO_INCREMENT,
	movie_id INT(10) NOT NULL,
	room_id INT(10) NOT NULL,
	FOREIGN KEY FK_SessionMovie(movie_id)
	REFERENCES movie(id)
	ON UPDATE CASCADE
	ON DELETE RESTRICT,
	FOREIGN KEY FK_SessionRoom(room_id)
	REFERENCES room(id)
	ON UPDATE CASCADE
	ON DELETE RESTRICT
);





